var Web3 = require('web3');

const address = '0x612fb91090c8919a7f55c5728e1b061e287ba92f';

web3 = new Web3(new Web3.providers.WebsocketProvider('ws://localhost:8845'));

const abi = [
    {
      "inputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "name": "isMember",
          "type": "bool"
        },
        {
          "indexed": false,
          "name": "memberId",
          "type": "uint8"
        }
      ],
      "name": "MembershipStatusSet",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "name": "value",
          "type": "uint256"
        }
      ],
      "name": "FundsDonated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "name": "tokenContractAddress",
          "type": "address"
        },
        {
          "indexed": false,
          "name": "value",
          "type": "uint256"
        }
      ],
      "name": "TokensDonated",
      "type": "event"
    },
    {
      "constant": false,
      "inputs": [],
      "name": "setMembershipStatus",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [],
      "name": "heartbeat",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "_memberId",
          "type": "uint8"
        },
        {
          "name": "_memberName",
          "type": "bytes32"
        },
        {
          "name": "_memberAddress",
          "type": "address"
        }
      ],
      "name": "revokeAndSetNewMember",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [],
      "name": "proclaimAllInactive",
      "outputs": [
        {
          "name": "complete",
          "type": "bool"
        }
      ],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [],
      "name": "inactivateSelf",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [],
      "name": "revokeAllVulnerable",
      "outputs": [
        {
          "name": "complete",
          "type": "bool"
        }
      ],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [],
      "name": "revokeSelf",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [],
      "name": "donateFunds",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "_tokenContractAddress",
          "type": "address"
        }
      ],
      "name": "donateTokens",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "donationAddress",
      "outputs": [
        {
          "name": "",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    }
  ]

// CHANGE CONTRACT AND SWAP IN NEW theCyber ADDRESS BEFORE SETTING NEW BYTECODE
const bytecode = "0x606060405260008054600160a060020a03191673d93e32a72208b24625f6601e90e287c38a55e4da179055341561003557600080fd5b60008054600160a060020a03169063bf4386a090604051602001526040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b151561009757600080fd5b6102c65a03f115156100a857600080fd5b50505060405180516000805461ffff9092167601000000000000000000000000000000000000000000000260b060020a61ffff021990921691909117808255600160a060020a03169150637bbb3a6090604051602001526040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b151561014657600080fd5b6102c65a03f1151561015757600080fd5b50505060405180516000805467ffffffffffffffff909216780100000000000000000000000000000000000000000000000002600160c060020a0390921691909117808255600160a060020a0316915063ec034bed90604051602001526040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b15156101fb57600080fd5b6102c65a03f1151561020c57600080fd5b5050506040518051600180546000805460a060020a60ff021916905560a060020a61ffff0219600160a060020a03909316600160a060020a031990911617919091169055506111c9806102606000396000f30060606040526004361061008a5763ffffffff60e060020a60003504166308614362811461008f57806321ef10f0146100b05780633defb962146100c357806347bba01d146100d65780637150773d146100e95780637c937700146100fc57806391b25b3514610123578063b43959c01461014b578063e4f896e81461015e578063ec034bed14610171575b600080fd5b341561009a57600080fd5b6100ae600160a060020a03600435166101a0565b005b34156100bb57600080fd5b6100ae6103e8565b34156100ce57600080fd5b6100ae610554565b34156100e157600080fd5b6100ae610632565b34156100f457600080fd5b6100ae610786565b341561010757600080fd5b61010f610887565b604051901515815260200160405180910390f35b341561012e57600080fd5b6100ae60ff60043516602435600160a060020a0360443516610ba7565b341561015657600080fd5b6100ae610d0a565b341561016957600080fd5b61010f610ea9565b341561017c57600080fd5b61018461118e565b604051600160a060020a03909116815260200160405180910390f35b60008054600160a060020a031663a7f2f4e233836040516040015260405160e060020a63ffffffff8416028152600160a060020a0390911660048201526024016040805180830381600087803b15156101f857600080fd5b6102c65a03f1151561020957600080fd5b5050506040518051906020018051509091505080151561022857600080fd5b30600160a060020a031682600160a060020a03161415151561024957600080fd5b7f77f539fcdd957862f66732d7375ff654f6fe9f4a8b5987f00fb76c95c5022a518283600160a060020a03166370a082313060006040516020015260405160e060020a63ffffffff8416028152600160a060020a039091166004820152602401602060405180830381600087803b15156102c257600080fd5b6102c65a03f115156102d357600080fd5b50505060405180519050604051600160a060020a03909216825260208201526040908101905180910390a1600154600160a060020a038084169163a9059cbb9116826370a082313060006040516020015260405160e060020a63ffffffff8416028152600160a060020a039091166004820152602401602060405180830381600087803b151561036257600080fd5b6102c65a03f1151561037357600080fd5b5050506040518051905060006040516020015260405160e060020a63ffffffff8516028152600160a060020a0390921660048301526024820152604401602060405180830381600087803b15156103c957600080fd5b6102c65a03f115156103da57600080fd5b505050604051805150505050565b600080548190600160a060020a031663a7f2f4e233836040516040015260405160e060020a63ffffffff8416028152600160a060020a0390911660048201526024016040805180830381600087803b151561044257600080fd5b6102c65a03f1151561045357600080fd5b5050506040518051906020018051509091505080151561047257600080fd5b60008054600160a060020a03169063a7f2f4e29033906040516040015260405160e060020a63ffffffff8416028152600160a060020a0390911660048201526024016040805180830381600087803b15156104cc57600080fd5b6102c65a03f115156104dd57600080fd5b5050506040518051906020018051600054909450600160a060020a0316915063b10c7dc490508360405160e060020a63ffffffff841602815260ff9091166004820152602401600060405180830381600087803b151561053c57600080fd5b6102c65a03f1151561054d57600080fd5b5050505050565b60008054600160a060020a031663a7f2f4e233836040516040015260405160e060020a63ffffffff8416028152600160a060020a0390911660048201526024016040805180830381600087803b15156105ac57600080fd5b6102c65a03f115156105bd57600080fd5b505050604051805190602001805150909150508015156105dc57600080fd5b600054600160a060020a0316633defb9626040518163ffffffff1660e060020a028152600401600060405180830381600087803b151561061b57600080fd5b6102c65a03f1151561062c57600080fd5b50505050565b600080548190600160a060020a031663a7f2f4e233836040516040015260405160e060020a63ffffffff8416028152600160a060020a0390911660048201526024016040805180830381600087803b151561068c57600080fd5b6102c65a03f1151561069d57600080fd5b505050604051805190602001805150909150508015156106bc57600080fd5b60008054600160a060020a03169063a7f2f4e29033906040516040015260405160e060020a63ffffffff8416028152600160a060020a0390911660048201526024016040805180830381600087803b151561071657600080fd5b6102c65a03f1151561072757600080fd5b5050506040518051906020018051600054909450600160a060020a0316915063e8350fae90508360405160e060020a63ffffffff841602815260ff9091166004820152602401600060405180830381600087803b151561053c57600080fd5b60008054600160a060020a031663a7f2f4e233836040516040015260405160e060020a63ffffffff8416028152600160a060020a0390911660048201526024016040805180830381600087803b15156107de57600080fd5b6102c65a03f115156107ef57600080fd5b5050506040518051906020018051509091505080151561080e57600080fd5b7f7bab8b153e4d965bbea263e6ec7fd668200f097331376c34c28353e11fd2384330600160a060020a03163160405190815260200160405180910390a1600154600160a060020a039081169030163180156108fc0290604051600060405180830381858888f19350505050151561088457600080fd5b50565b6000805481908190819081908190600160a060020a031663a7f2f4e233836040516040015260405160e060020a63ffffffff8416028152600160a060020a0390911660048201526024016040805180830381600087803b15156108e957600080fd5b6102c65a03f115156108fa57600080fd5b5050506040518051906020018051509091505080151561091957600080fd5b60005460a060020a900460ff16151561093157600080fd5b60008054600160a060020a03169063a7f2f4e29033906040516040015260405160e060020a63ffffffff8416028152600160a060020a0390911660048201526024016040805180830381600087803b151561098b57600080fd5b6102c65a03f1151561099c57600080fd5b505050604051805190602001805160015490975060a860020a900460ff1693506202ab989150505a116109ce57600080fd5b6202ab985a1115610b6f5760008054600160a060020a03169063aef3bc1790849060405160a0015260405160e060020a63ffffffff841602815260ff909116600482015260240160a060405180830381600087803b1515610a2e57600080fd5b6102c65a03f11515610a3f57600080fd5b505050604051805190602001805190602001805190602001805190602001805160005492995097505060ff86811660a860020a9092041614801593509150610a8f905057508460ff168260ff1614155b8015610aa35750600160a060020a03831615155b8015610ab8575067ffffffffffffffff841615155b8015610af1575060005467ffffffffffffffff780100000000000000000000000000000000000000000000000090910481168501164210155b15610b5557600054600160a060020a031663b10c7dc48360405160e060020a63ffffffff841602815260ff9091166004820152602401600060405180830381600087803b1515610b4057600080fd5b6102c65a03f11515610b5157600080fd5b5050505b60019091019060ff82161515610b6a57610b6f565b6109ce565b506001805475ff000000000000000000000000000000000000000000191660a860020a60ff9390931692830217905515949350505050565b60008054600160a060020a031663a7f2f4e233836040516040015260405160e060020a63ffffffff8416028152600160a060020a0390911660048201526024016040805180830381600087803b1515610bff57600080fd5b6102c65a03f11515610c1057600080fd5b50505060405180519060200180515090915050801515610c2f57600080fd5b600054600160a060020a031663b10c7dc48560405160e060020a63ffffffff841602815260ff9091166004820152602401600060405180830381600087803b1515610c7957600080fd5b6102c65a03f11515610c8a57600080fd5b5050600054600160a060020a03169050638c9c297785858560405160e060020a63ffffffff861602815260ff90931660048401526024830191909152600160a060020a03166044820152606401600060405180830381600087803b1515610cf057600080fd5b6102c65a03f11515610d0157600080fd5b50505050505050565b60008054600160a060020a031663a7f2f4e233836040516040015260405160e060020a63ffffffff8416028152600160a060020a0390911660048201526024016040805180830381600087803b1515610d6257600080fd5b6102c65a03f11515610d7357600080fd5b50505060405180519060200180515090915050801515610d9257600080fd5b60008054600160a060020a03169063a7f2f4e29030906040516040015260405160e060020a63ffffffff8416028152600160a060020a0390911660048201526024016040805180830381600087803b1515610dec57600080fd5b6102c65a03f11515610dfd57600080fd5b50505060405180519060200180516000805475ff000000000000000000000000000000000000000000191660a860020a60ff93841681029190911774ff0000000000000000000000000000000000000000191660a060020a951515860217918290557fa6ba098587fdc250fa7cfe060edfcb38cbd85ceff2ca0e11ce51820bb37fee0a94820483169350900416604051911515825260ff1660208201526040908101905180910390a150565b6000805481908190819081908190600160a060020a031663a7f2f4e233836040516040015260405160e060020a63ffffffff8416028152600160a060020a0390911660048201526024016040805180830381600087803b1515610f0b57600080fd5b6102c65a03f11515610f1c57600080fd5b50505060405180519060200180515090915050801515610f3b57600080fd5b60005460a060020a900460ff161515610f5357600080fd5b60008054600160a060020a03169063a7f2f4e29033906040516040015260405160e060020a63ffffffff8416028152600160a060020a0390911660048201526024016040805180830381600087803b1515610fad57600080fd5b6102c65a03f11515610fbe57600080fd5b505050604051805190602001805160015490975060a060020a900460ff1693506202ab989150505a11610ff057600080fd5b620298105a11156111575760008054600160a060020a03169063aef3bc1790849060405160a0015260405160e060020a63ffffffff841602815260ff909116600482015260240160a060405180830381600087803b151561105057600080fd5b6102c65a03f1151561106157600080fd5b505050604051805190602001805190602001805190602001805190602001805160005492995097505060ff86811660a860020a90920416148015935091506110b1905057508460ff168260ff1614155b80156110c55750600160a060020a03831615155b80156110d9575067ffffffffffffffff8416155b1561113d57600054600160a060020a031663e8350fae8360405160e060020a63ffffffff841602815260ff9091166004820152602401600060405180830381600087803b151561112857600080fd5b6102c65a03f1151561113957600080fd5b5050505b60019091019060ff8216151561115257611157565b610ff0565b506001805474ff0000000000000000000000000000000000000000191660a060020a60ff9390931692830217905515949350505050565b600154600160a060020a0316905600a165627a7a723058205779be139ccb2e79bf2f5b491711da9f4c87f08908280d452b3dbc17702f3cc30029"

const theCyberMemberUtilities = new web3.eth.Contract(abi);

theCyberMemberUtilities.deploy({
    data: bytecode
})
.send({
    from: address,
    gas: 7777777,
    gasPrice: '1000616765'
}, function(error, transactionHash){})
.on('error', function(error){ console.log(error) })
.on('transactionHash', function(transactionHash){ console.log(transactionHash) })
.on('receipt', function(receipt){
   console.log(receipt.contractAddress) // contains the new contract address
   console.log(receipt.events)
})
.on('confirmation', function(confirmationNumber, receipt){ console.log(confirmationNumber) })
.then(function(newContractInstance){
    console.log(newContractInstance.options.address) // instance with the new contract address
}).then(() => {
  process.exit()
})
